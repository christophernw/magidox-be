the bacteria have defence mechanism just like we do.  one of those is an MDR pump that once it recognizes something as toxic expells it.  if you don't take all the meds and some of the bugs survive they adapt