It is probably the high content of sugar that is causing the tantrums.  Try finding a better chocolate bar that is at least 70% coco at a health food store.  Chocolate is suppose to be healthy for you now but if your son is allergic to it, then by all means don't let him eat it.  Try the higher coco content bar first before you make him stop.  When he is given chocolate make sure it is not too much.