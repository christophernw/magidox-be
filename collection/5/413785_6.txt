I highly doubt that it's a flaw in evolution- if it were selection based, and if it were truly a flaw, it would be removed from the population. I think that you mighht want to go and look up how evolution works!  Also, it is not a  branch really, as branches arise at the nodes of plants, where thorns tend to arise in the internode.  Instead it is a modified section of the stem.  Most likely the thorn is a protective measure to keep the flowers and the resulting fruit from being eaten.  This being said, they do get eaten, and are animal dispersed, but by what I am not sure.