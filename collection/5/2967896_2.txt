The probable answer is to store oxygen compressed in tanks within the sub.. To make it (if its a nuclear sub), another probable answer is the electrolysis of water as there are plenty of energy within sub and plenty of water outside of it.