It is part of a master plan that Dumbledore has worked out in advance for defeating Voldermort.  In the book, it seemed as if Snape didn't want to kill Dumbledore, but Dumbledore asked him to.